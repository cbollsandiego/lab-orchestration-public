{% extends 'base.html' %}

{% block content %}
    <h1>{{ course.course_name }}</h1>
    <h2>Instructor:</h2>
    <p><a href="{{ url_for('user', user_id=instructor.id) }}">{{ instructor.name }}</a></p>
    {% if sessions %}
        <h2>Sessions:</h2>
        {% for session in sessions %}
            <h3><a href="{{ url_for('session', course_id=course.id, session_id=session.id) }}">{{ session.name }}</a></h3>
        {% endfor %}
    {% endif %}
    {% if session_add_form %}
        <form action="" method="post" novalidate>
            {{ session_add_form.csrf_token }}
            {{ session_add_form.name.label }} <br>
            {{ session_add_form.name()}} <br>
            {{ session_add_form.lab.label }} <br>
            {{ session_add_form.lab() }} <br>
            {{ session_add_form.submit_new_session.label }} <br>
            {{ session_add_form.submit_new_session() }}
        </form>
    {% endif %}

    <h2>Students:</h2>
    <ul>
        {% for student in students %}
            <li><a href="{{ url_for('user', user_id=student.id) }}">{{ student.name }}</a></li>
        {% endfor %}
    </ul>

    {% if add_student_form %}
        <form action="" method="post" novalidate>
            {{ add_student_form.csrf_token }}
            {{ add_student_form.name.label }} <br>
            {{ add_student_form.name() }} <br>
            {{ add_student_form.submitstudent() }} <br>
        </form>
    {% endif %}
    <br>
    {% if add_file_form %}
        <form action="" method="post" novalidate enctype="multipart/form-data">
            {{ add_file_form.csrf_token }}
            {{ add_file_form.file.label }} <br>
            {{ add_file_form.file() }} <br>
            {{ add_file_form.submitfile() }} <br>
        </form>
    {% endif %}
    <br>
    {% if remove_form %}
        <form action="" method="post" novalidate>
            {{ remove_form.csrf_token }}
            {{ remove_form.students.label }} <br>
            {{ remove_form.students() }} <br>
            {{ remove_form.submit_remove() }} <br>
        </form>
    {% endif %}
    <br>
    {% if delete_form %}
        <form action="{{ url_for('delete_course', course_id=course.id) }}" method="post">
            {{ delete_form.csrf_token }}
            <input type="submit" value="Delete Course" onclick="return confirmDelete(event)">
        </form>
    {% endif %}

    <script>
        function confirmDelete(event) {
            if (!confirm("Are you sure you want to delete this course?")) {
                event.preventDefault();
                return false;
            }
            return true;
        }
    </script>
{% endblock %}